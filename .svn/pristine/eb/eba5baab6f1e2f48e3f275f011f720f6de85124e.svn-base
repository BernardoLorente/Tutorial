<?php
/**
 * The browse view file of notice module of ZenTaoPMS.
 *
 * @copyright   Copyright 2009-2013 青岛易软天创网络科技有限公司 (QingDao Nature Easy Soft Network Technology Co,LTD www.cnezsoft.com)
 * @license     LGPL (http://www.gnu.org/licenses/lgpl.html)
 * @author      Chunsheng Wang <chunsheng@cnezsoft.com>
 * @package     notice
 * @version     $Id: browse.html.php 4129 2013-01-18 01:58:14Z wwccss $
 * @link        http://www.zentao.net
 */
?>
<?php include '../../common/view/header.html.php';?>

<div id='titlebar'>
  <div class='heading'>
    <strong><?php echo $lang->notice->common;?></strong>
  </div>
</div>

<form method='post' id='mynoticeForm'>
  <table class='table table-condensed table-hover table-striped tablesorter table-fixed' align="center" id='noticetable'>
  <?php $vars = "orderBy=%s&recTotal=$recTotal&recPerPage=$recPerPage&pageID=$pageID"; ?>
    <thead>
    <tr class='text-center'>
      <th width="20px" class='text-left'> <?php common::printOrderLink('id', $orderBy, $vars, $lang->idAB);?></th>
      <th class='w-400px text-left'> <?php echo $lang->notice->title;?></th>
      <th class='w-hour'> <?php common::printOrderLink('creatorID', $orderBy, $vars, $lang->notice->creator);?></th>
      <th class='w-hour'> <?php common::printOrderLink('createtime', $orderBy, $vars, $lang->notice->createtime);?></th>
      <?php if ($this->session->userinfo->roleid != 'student'):?>
      <th class='w-30px'> <?php echo $lang->actions;?></th>
      <?php endif;?>
    </tr>
    </thead>   
    <tbody>
    <?php foreach($notices as $notice):?>
    <tr class='text-center'>
      <td class='text-left'><?php echo sprintf('%03d', $notice->id);?></td>
      <td class='text-left nobr'><?php echo html::a($this->createLink('notice', 'view', "noticeID=$notice->id"), $notice->title);?></td>
      <td><?php echo $userpairs[$notice->creatorID];?></td>
      <td><?php echo $notice->createtime;?></td>
      <?php if ($this->session->userinfo->roleid != 'student'):?>
      <td class='text-center'>
        <?php 
            if($this->loadModel('notice')->checkPriv($notice->id, 'delete'))
              common::printIcon('notice', 'delete', "noticeID=$notice->id", $notice, 'list', '', 'hiddenwin');                               
        ?>
      </td>
      <?php endif;?>
    </tr>
    <?php endforeach;?>
    </tbody>
    <tfoot>
      <tr>
          <td colspan='4'>
            <?php $pager->show();?>
          </td>
        </tr>
    </tfoot>
  </table> 
</form>
<?php include '../../common/view/footer.html.php';?>
