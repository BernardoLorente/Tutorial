<?php
/**
 * @author iat
 * @date 20140828
 */
class my extends control
{
	/**
	 * Construct function.
	 * 
	 * @access public
	 * @return void
	 */
	public function __construct()
	{
		parent::__construct();
		$this->my->setMenu();
	}

	/**
	 * Index page, goto todo.
	 * 
	 * @access public
	 * @return void
	 */
	public function index()
	{
		$this->app->loadClass('pager', true);
		$taskCounts = new pager($recTotal = 1000, $this->config->my->taskCounts);
		$problemCounts = new pager($recTotal = 1000, $this->config->my->problemCounts);
		$dynamicCounts = new pager($recTotal = 1000, $this->config->my->dynamicCounts);

		$this->view->tasks = $this->loadModel('task')->getTasks('', '', $taskCounts);
		$this->view->problems = $this->loadModel('problem')->getProblems('', '', '', '', $problemCounts);
		$this->view->actions = $this->loadModel('action')->getDynamic('all', 'all', 'date_desc', $dynamicCounts);
		$this->display();
	}
}
