/* If left = 0, warning. */
function checkLeft()
{
    value = $("#left").val();
    if(isNaN(parseInt(value)) || value == 0) 
    {
        if(confirm(confirmFinish))
        {
            return true;
        }
        else
        {
            return false;
        }
    }
}

$(function()
{
    $("a.extension, a.manual").modalTrigger({width:1024, height:600, type:'iframe'});
})

/**
 * Compute work days.
 * 
 * @access public
 * @return void
 */
function computeWorkDays()
{
    var begin = document.getElementById("starttime").value;
    var end = document.getElementById("deadline").value;
    
    if (begin > end)
    {
        $('#deadline').val('');
        $('#days').val('');
        alert("截止时间不能在开始时间之前！！");
        return ;
    }
    var d_bengin = begin.split('-');
    var d_end = end.split('-');

    var n_begin = new Date(d_bengin[0] + '-' + d_bengin[1] + '-' + d_bengin[2]);
    var n_end = new Date(d_end[0] + '-' + d_end[1] + '-' + d_end[2]);

    var days = parseInt(((n_end.getTime() - n_begin.getTime())/(1000*3600*24)));
    //alert(days);
    $('#days').val(days);
}

function computeWorkDate()
{
    var begin = document.getElementById('starttime').value;
    var days = document.getElementById('days').value;
    
    if (days <= 0)
    {
        $('#deadline').val('');
        $('#days').val('');
        alert("天数不能为负!!");
        return ;
    }

    var d_begin = begin.split('-');
    var n_begin = new Date(d_begin[0], d_begin[1], d_begin[2]);

    n_begin = n_begin.valueOf();

    var end = n_begin + days*24*60*60*1000;
    var d_end = new Date(end);   
    var j_end = d_end.getFullYear() + '-' + d_end.getMonth() + '-' + d_end.getDate();
    $('#deadline').val(j_end);
}